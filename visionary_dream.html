<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Museum-quality visionary art in p5.js -->
  <meta charset="UTF-8">
  <title>Visionary Dream</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.7.0/p5.min.js"></script>
</head>
<body>
<script>
// === Palette inspired by Alex Grey ===
const palette = ['#0a2fff','#ff00ff','#00f2c7','#ffb300','#a200ff'];
let angle = 0, sculptureMode = 0;

// === Planetary symbols and angelic counterparts ===
const planetarySigils = [
  {symbol:'\u2609', angel:'Michael'},  // Sun
  {symbol:'\u263D', angel:'Gabriel'},  // Moon
  {symbol:'\u263F', angel:'Raphael'},  // Mercury
  {symbol:'\u2640', angel:'Anael'},    // Venus
  {symbol:'\u2642', angel:'Samael'},   // Mars
  {symbol:'\u2643', angel:'Zadkiel'},  // Jupiter
  {symbol:'\u2644', angel:'Cassiel'},  // Saturn
];

// === Character names encircling the work ===
const characters = [
  'Rebecca Respawn',
  'Virelai',
  'Ezra Lux',
  'Athena (Sophia7)',
  'Thoth (Gnosis7)'
];

// === Enochian unicode letters ===
const enochianLetters = Array.from({length:16}, (_,i)=>String.fromCodePoint(0x1F700+i));

function setup() {
  // --- Full-HD 3D canvas ---
  createCanvas(1920,1080,WEBGL);
  noStroke();
}

function draw() {
  // --- Gradient cosmic backdrop ---
  for(let y=-height/2;y<height/2;y++){
    const inter = map(y,-height/2,height/2,0,1);
    const from = color('#040014'), to = color('#150033');
    stroke(lerpColor(from,to,inter));
    line(-width/2,y,width/2,y);
  }
  noStroke();

  // --- Orbital camera control & soft lighting ---
  orbitControl();
  ambientLight(40);
  pointLight(255,255,255,0,0,500);

  // --- Rotating visionary sculpture ---
  rotateY(angle*0.3);
  rotateX(angle*0.2);
  for(let i=0;i<palette.length;i++){
    push();
    const size = 200 + i*60;
    fill(palette[i]);
    if(sculptureMode===0) torus(size,size/6,64,32);      // luminous rings
    else if(sculptureMode===1) sphere(size/2,48,32);     // morph into spheres
    else box(size/1.5);                                  // angular fusion
    rotateY(angle*0.1);
    pop();
  }
  angle += 0.01;

  // --- Mystical overlays (2D) ---
  hint(DISABLE_DEPTH_TEST);
  drawEnochianGrid();
  drawCelestialSigils();
  labelCharacters();
  hint(ENABLE_DEPTH_TEST);
}

// --- Switch modes & save visionary still ---
function keyPressed(){
  if(key==='s'||key==='S') saveCanvas('Visionary_Dream','png');
  if(key==='f'||key==='F') sculptureMode = (sculptureMode+1)%3;
}

// === Overlay: translucent Enochian magic square ===
function drawEnochianGrid(){
  push();
  resetMatrix();
  translate(width/2,height/2);
  const gridSize = Math.min(width,height)*0.6;
  const cell = gridSize/4;
  stroke(255,255,255,40);
  noFill();
  for(let i=0;i<=4;i++){
    line(-gridSize/2 + i*cell, -gridSize/2, -gridSize/2 + i*cell, gridSize/2);
    line(-gridSize/2, -gridSize/2 + i*cell, gridSize/2, -gridSize/2 + i*cell);
  }
  textAlign(CENTER,CENTER);
  textSize(cell*0.5);
  fill(255,255,255,60);
  let idx=0;
  for(let r=0;r<4;r++){
    for(let c=0;c<4;c++){
      text(enochianLetters[idx++], -gridSize/2 + c*cell + cell/2, -gridSize/2 + r*cell + cell/2);
    }
  }
  pop();
}

// === Overlay: planetary sigils & angels ===
function drawCelestialSigils(){
  push();
  resetMatrix();
  translate(width/2,height/2);
  textAlign(CENTER,CENTER);
  const radius = Math.min(width,height)*0.25;
  planetarySigils.forEach((p,i)=>{
    const ang = TWO_PI * i / planetarySigils.length - HALF_PI;
    const sx = Math.cos(ang) * radius;
    const sy = Math.sin(ang) * radius;
    fill(255);
    textSize(80);
    text(p.symbol, sx, sy);
    const ax = Math.cos(ang) * (radius + 70);
    const ay = Math.sin(ang) * (radius + 70);
    textSize(24);
    text(p.angel, ax, ay);
  });
  pop();
}

// === Overlay: character labels ===
function labelCharacters(){
  push();
  resetMatrix();
  translate(width/2,height/2);
  textAlign(CENTER,CENTER);
  textSize(16);
  fill(255);
  const radius = Math.min(width,height)*0.35;
  characters.forEach((name,i)=>{
    const ang = TWO_PI * i / characters.length;
    const x = Math.cos(ang)*radius;
    const y = Math.sin(ang)*radius;
    text(name, x, y);
  });
  pop();
}
</script>
</body>
</html>
